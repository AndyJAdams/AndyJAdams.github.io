<DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ARC Test</title>
	<style type="text/css">
		body{
            margin: 0;
            touch-action: none;
            position: fixed;
            -webkit-touch-callout: none !important;
            -webkit-user-select: none !important;
        }
        canvas{
            touch-action: none;
        }
	</style>
</head>
<body id='body'>
	<canvas id='canvas'></canvas>
	<script>
    var startAngle = 0; var endAngle = 359;
        var radius = 200;
    var limits = {
        min: dtr(startAngle), //Convert the angles into "PURE" radians
        max: dtr(endAngle)
    };
        var flip = false;
    var curAngle = limits.min+(Math.random()*(limits.max-limits.min)); //Select a point starting from the minimum radian to some random distance along path to maximum
	var canvas = document.getElementById('canvas');	
    function scaleCanvas(){
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;
	}
	var ctx = canvas.getContext('2d');

	function animate(){
		window.requestAnimationFrame(animate);
		ctx.clearRect(0,0,innerWidth,innerHeight);
        
        //Draw limits -Ring
        ctx.beginPath();
        ctx.arc(innerWidth/2,innerHeight/2,radius,limits.min,limits.max);
        ctx.stroke();
        ctx.closePath();
        
        //Draw Target
        ctx.beginPath();
        //Here we use Cosine and Sine to determine the position in x and y. We need to add the center of the screen since the math is calculated assuming 0,0 as center.
       var x = radius*Math.cos(curAngle)+innerWidth/2;
        var y = radius*Math.sin(curAngle)+innerHeight/2;
        ctx.arc(x,y,10,0,2*Math.PI); //Draw the dot
        ctx.fill();
        ctx.closePath();
        
        if(!flip){
            curAngle += 0.001;
        } else {
            curAngle -= 0.001;
        }
        
        if(curAngle >= limits.max){
            flip = !flip;
        } else if(curAngle <= limits.min){
            flip = !flip;
        }
        
        ctx.fillText(curAngle , 10,10);
        
        ctx.beginPath();
        ctx.arc(innerWidth/2, innerHeight/2,50,0,1*Math.PI);
        ctx.stroke();
	}
        
    function rtd(a){ //Radians To Degrees
        return a*(180/Math.PI);
    }
        
    function dtr(a){ //Degrees To "Pure" Radians
        return a*(Math.PI/180);
    }

	//*** INPUT SECTION **//
    var start = {x:-1,y:-1};
    window.addEventListener('resize',function(evt){
        evt.preventDefault();
        scaleCanvas();
    });
    
    
    window.addEventListener('mousedown',inputStart,false);
    window.addEventListener('mousemove',inputMove,false);
    window.addEventListener('mouseup',inputEnd,false);

    window.addEventListener('touchstart',inputStart, false);
    window.addEventListener('touchmove', inputMove,false);
    window.addEventListener('touchcancel',inputEnd,false);
    window.addEventListener('touchend',inputEnd,false);
    
    var start = {x:-1,y:-1};
    function inputStart(evt){
        evt.preventDefault();
        if(evt.changedTouches != undefined){
            var touches = evt.changedTouches;
            if(touches.length > 0){
                start.x = touches[0].pageX;
                start.y = touches[0].pageY;
            }
        } else {
            start.x = evt.pageX;
            start.y = evt.pageY;
        }
    }
    
    function inputMove(evt){
        evt.preventDefault();
        var x = -1; var y = -1;
        if(start.x > -1){
            if(evt.changedTouches != undefined){
                var touches = evt.changedTouches;
                if(touches.length > 0){
                    x = touches[0].pageX;
                    y = touches[0].pageY;
                }
            } else {
                x = evt.pageX;
                y = evt.pageY;
            }
        }
    }
    
    function inputEnd(){
        start.x = -1;
    }
    
    scaleCanvas();
	animate();
	</script>
</body>
</html>