<!DOCTYPE html>
<html lang="en US">
  <head>
    <meta charset="UTF-8">
    <title>STREAM_PAGE</title>
    <style>
      body{
      margin:0;
      overflow: hidden;
      }
    </style>
  </head>
  <body>
    <canvas></canvas>
  </body>
  <script>
    var canvas = document.querySelector('canvas');
    canvas.width=window.innerWidth;
    canvas.height= window.innerHeight;
    var ctx = canvas.getContext('2d');
    var col1 = '#000000',col2 = '#FF00FF';

    var duration=2.50;

    // calculate the # of frames that requestAnimationFrame can
    // draw during the duration
    var opacitySteps=parseInt(60*duration);
    // set the current opacity step at its starting number (0)
    var opacityStep=0;

    function getNewColor(){
      var out = '#';
      for(var i = 0; i < 6; i++){
        var rand= Math.floor(Math.random()*16);
        switch(rand){
          case 10: out+= 'A'; break;
          case 11: out+= 'B'; break;
          case 12: out+= 'C'; break;
          case 13: out+= 'D'; break;
          case 14: out+= 'E'; break;
          case 15: out+= 'F'; break;
          default: out+= rand; break;
        }
      }
      return out;
    }


    function animate(){
  		window.requestAnimationFrame(animate);
  		ctx.clearRect(0,0,innerWidth,innerHeight);

      var opacity=100*(opacityStep/opacitySteps);
      if(opacityStep>=opacitySteps-1){
        opacity=100;
      }

      ctx.globalAlpha=(100-opacity)/100;
      drawCircle(innerWidth-190,innerHeight-210,140,20,col1);
      ctx.globalAlpha=(opacity/100);
      drawCircle(innerWidth-190,innerHeight-210,140,20,col2);
      ctx.globalAlpha = 1.0;

      if(++opacityStep>=opacitySteps){
        col1 = col2;
        col2 = getNewColor();
        opacityStep = 0;
        //RESET??
      }
  	}

    function drawCircle(x,y,r,l = 20,c){
      ctx.strokeStyle=c;
      ctx.beginPath();
      ctx.arc(x,y,r,0,2*Math.PI);
      ctx.lineWidth = l;
      ctx.stroke();
      ctx.closePath();
    }


    animate();
  </script>
</html>
