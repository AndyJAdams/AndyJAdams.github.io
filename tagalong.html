<DOCUMENT html><html><head><meta charset="UTF-8"/><title>Path</title><style>body{margin:0;}</style></head>
<body><canvas id='canvas'></canvas><script>
var can = document.querySelector('canvas');
can.width = window.innerWidth-2;
can.height = window.innerHeight-2;
var ctx = can.getContext('2d');
ctx.lineCap = 'round';
ctx.lineJoin = 'round';
ctx.lineWidth = 5;
ctx.font = '28px Verdana';
ctx.fillStyle='#000';

var mx = -1;
var my = -1;

var colorArray = ['#4E79A7','#F28E2B','#E15759','#76B7B2','#59A14F','#EDC948','#B07AA1','#FF9DA7','#9C755F','#BAB0AC'];

function Block(x,y,w,h,val,joined){
	this.x = x;
	this.y = y;
	this.w = w;
	this.h = h;
	this.val = val;
	this.joined = [undefined,undefined,undefined,undefined];
	this.selected = false;

	this.draw = function(){
		ctx.fillStyle = colorArray[this.val];
		if(this.selected){
			ctx.fillStyle = '#FFF';
		}
		ctx.fillRect(this.x, this.y, this.w+1, this.h+1);
	}

	this.update = function(){
		CheckNeighbors(this);
		if(this.x < mx && this.x + this.w > mx && this.y < my && this.y+this.h > my){
			this.selected = true;
			for(var i = 0; i < this.joined.length; i++){
				if(this.joined[i] != undefined){
					this.joined[i].select(true);
				}
			}
		} else {
			this.select(false);
		}
		this.draw();
	}

	this.select = function(sel){
		this.selected = sel;
	}
}

var rowCount = 8;
var colCount = 7;
var blockWidth = (innerWidth/colCount);
var blockHeight = (innerHeight/rowCount);


var blocks = [];
for(var r = 0; r < rowCount; r++){
	for(var c = 0; c < colCount; c++){
		blocks.push(new Block(c*blockWidth,r*blockHeight,blockWidth,blockHeight,Math.round(Math.random()*(colorArray.length-1))));
	}
}

function animate(){
	window.requestAnimationFrame(animate);
	ctx.clearRect(0,0,innerWidth,innerHeight);

	for(var b = 0; b < blocks.length; b++){
		blocks[b].update();
	}

}


function CheckNeighbors(blk){
	for(var i = 0; i < blocks.length; i++){
		//Above
		if(!blk.joined[0] && blocks[i].x == blk.x && blocks[i].y-blockHeight == blk.y){
			if(blocks[i].val == blk.val){
				blk.joined[0] = blocks[i];
				blocks[i].joined[2] = blk;
			}
		}
		//Below
		if(!blk.joined[2] && blocks[i].x == blk.x && blk.y-blockHeight == blocks[i].y){
			if(blocks[i].val == blk.val){
				blk.joined[2] = blocks[i];
				blocks[i].joined[0] = blk;
			}
		}
		//Right
		if(!blk.joined[1] && blocks[i].y == blk.y && blocks[i].x-blockWidth == blk.x){
			if(blocks[i].val == blk.val){
				blk.joined[1] = blocks[i];
				blocks[i].joined[3] = blk;
			}
		}
		//Left
		if(!blk.joined[3] && blocks[i].y == blk.y && blk.x-blockWidth == blocks[i].x){
			if(blocks[i].val == blk.val){
				blk.joined[3] = blocks[i];
				blocks[i].joined[1] = blk;
			}
		}
	}
}

document.addEventListener('mousemove', function(e){
	mx = e.pageX;
	my = e.pageY;
});


animate();
</script></body></html>