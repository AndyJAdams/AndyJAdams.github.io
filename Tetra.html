<DOCTYPE html>
<html><head><title>TETRA</title><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script><script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script><style>body{ margin: 0; }</style></head><body><canvas></canvas></body>
<script>
	var canvas = document.querySelector('canvas');
	var timeout = false;
	var c = canvas.getContext('2d');
	
	function getDimensions(){
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;	
	}
	window.addEventListener('resize', function(){
		clearTimeout(timeout);
		timeout = setTimeout(getDimensions, 250);
	});

	function Particle(x,y,decay){
		this.x = x;
		this.y = y;
		this.decay = decay;
		this.radius = Math.random()*10;
		this.xspeed = (Math.random()-0.5)/7;
		this.yspeed = (Math.random()-0.5)/7;
		this.draw = function(){
			c.beginPath();
			c.arc(this.x, this.y, this.radius, Math.PI * 2, false);
			c.fillStyle = '#000000';
			c.fill();
		}

		this.update = function(){
			this.radius -= decay;
			if(this.radius < 0){
				this.reset();
			}
			this.x += this.xspeed;
			this.y += this.yspeed;
			this.draw();
		}

		this.reset = function(){
			this.x = x; this.y = y;
			this.radius = Math.random()*10;
			this.xspeed = (Math.random()-0.5)/7;
			this.yspeed = (Math.random()-0.5)/7;
		}
	}

	function Sun(x,y){
		this.x = x;
		this.y = y;
		this.draw = function(){
			c.beginPath();
			c.arc(this.x, this.y, 40, Math.PI*2, false);
			c.fillStyle='#FFFFFF';
			c.strokeStyle='#000000';
			c.lineWidth = 5;
			c.stroke();
			c.fill();
		}
	}

	function Planet(x,y,radius,distance, Sun){
		this.x = x;
		this.y = y;
		this.radius = radius;
		this.distance = distance;
		this.velocity = (Math.random()-0.5)/100;
		this.orgV = this.velocity;
		this.dx = this.velocity;
		this.dy = this.velocity;
		this.draw = function(){
			c.beginPath();
			c.arc(this.x, this.y, this.radius, Math.PI*2, false);
			c.fillStyle= '#8d8d8d';
			c.fill();
		}

		this.update = function(){
			this.dx += this.velocity;
			this.dy += this.velocity;
			this.x = Sun.x + (Math.sin(this.dx) * this.distance);
			this.y = Sun.y + (Math.cos(this.dy) * this.distance );
			this.draw();
		}

		this.reset = function(){
			this.velocity = this.orgV;
		}
	}

	var particleArray = [];
	for(var p = 0; p < 300; p++){
		particleArray.push(new Particle(innerWidth/2+(Math.random()-0.5)*30, innerHeight/2+(Math.random()-0.5)*30, 0.01));
	}
	var sunArray = [];
	for(var s = 0; s < 1; s++){
		sunArray.push(new Sun(innerWidth/2, innerHeight/2));
	}

	var planetArray = [];
	for(var a = 0; a < 2; a++){
		planetArray.push(new Planet(innerWidth/2+ Math.random()*60, innerHeight/2+Math.random()*80, 28, 200, sunArray[0]));
	}

	var focusedElement = sunArray[0];
	function animate(){
		requestAnimationFrame(animate);
		c.clearRect(0,0,innerWidth,innerHeight);
		for(var i = 0; i < particleArray.length; i++){
			particleArray[i].update();
		}
		sunArray[0].draw();
		for(var j = 0; j < planetArray.length; j++){
			planetArray[j].update();
		}
		

		
	}

	function isIntersect(point, circle) {
  		return Math.sqrt((point.x-circle.x) ** 2 + (point.y - circle.y) ** 2) < circle.radius;
	}

	canvas.addEventListener('click', (e) => {
		  const pos = {
		    x: e.clientX,
		    y: e.clientY
		  };
	 	 planetArray.forEach(Planet => {
		    if (isIntersect(pos, Planet)) {
		      focusedElement = Planet;
		      console.log(focusedElement);
		    }
	  	});
	  	sunArray.forEach(Sun =>{
		  if(isIntersect(pos, Sun)){
		  	console.log('Sun');
		  	focusedElement = Sun;
		  }
		});
	});

	getDimensions();
	animate();

</script></html>

