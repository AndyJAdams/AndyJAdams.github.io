<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Matter JS Demo</title>
	<style>
		body{
			margin: 0;
			overflow: hidden;
		}
	</style>
</head>
<body>
	<!--<canvas id='canvas'></canvas>-->
<script src='matter.min.js'></script>
<script>
	var Engine = Matter.Engine;
	var Render = Matter.Render;
	var World = Matter.World;
	var Bodies = Matter.Bodies;

	var swidth = window.innerWidth;
	var sheight = window.innerHeight;

	var engine = Engine.create();
	var render = Render.create({
		element: document.body,
		engine: engine,
		options: {
			width: swidth,
			height: sheight
		}
	});

	var orient = {
    	a:0,
    	b:0,
    	g:0
	}
	var dampner = 1.0;
	var forceX = 0;
	var forceY = 0;

	function Ball(x,y,r){
		this.x = x; this.y = y; this.r = r;
		this.bod = Bodies.circle(this.x, this.y, this.r);
		World.add(engine.world, this.bod);
		
	}

	var ball = new Ball(innerWidth/2, innerHeight/2, 40);

	window.addEventListener('resize',function(){
		swidth = window.innerWidth;
		sheight = window.innerHeight;
	});

	window.addEventListener('deviceorientation', function(event){
		event.preventDefault();
		orient.a = event.alpha; //lean left to right
		orient.b = event.beta; //lean top to bottom
		orient.g = event.gamma; //rotate around center

		//Limit alpha to -30(l) to 30(r)
		if(orient.g < -30.0){
			orient.g = -30.0;
		} else if(orient.g > 30.0){
			orient.g = 30.0;
		}

		//Limit beta to -30(away) to 30(near)
		if(orient.b < -30.0){
			orient.b = -30.0;
		} else if(orient.b > 30){
			orient.b = 30;
		}

		forceX = (orient.g*dampner); 
		forceY = (orient.b*dampner);

		ball.applyForce(forceX,forceY);

	});

	engine.world.gravity.x = 0;
	engine.world.gravity.y = 0;
	Engine.run(engine);
	Render.run(render);
</script>
</body>
</html>