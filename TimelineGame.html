<DOCUMENT html><html><head><title>Timeline</title><style>body{margin:0;}</style></head>
<body><canvas id='canvas'></canvas><script>
var canvas = document.querySelector('canvas');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
var ctx = canvas.getContext('2d');
var moveDampner = 20;
var baseFill = '#000';
var altFill = '#FFF';
if(new Date().getHours()>18){
	baseFill = '#FFF';
	altFill = '#000';
}

let mouse = {
	x: innerWidth/2,
	y: innerHeight/2,
	smpx: 0,
	smpy: 0
};

function Player(x,y,radius){
	this.x = x;
	this.y = y;
	this.radius = radius-4;
	this.maxRadius = radius;

	this.draw = function(){
		ctx.fillStyle = baseFill;
		ctx.beginPath();
		ctx.arc(this.x,this.y,this.maxRadius,0,2*Math.PI);
		ctx.fill();
		ctx.closePath();
		ctx.fillStyle = altFill;
		if(this.radius < this.maxRadius/2){
			ctx.fillStyle = '#F00';
		}
		ctx.beginPath();
		ctx.arc(this.x, this.y, this.radius,0,2*Math.PI);
		ctx.fill();
		ctx.closePath();
		
	}

	this.update = function(){
		this.x = mouse.x;
		this.y += mouse.y;
		if(this.y > innerHeight-40){
			this.y = innerHeight-40;
		} else if(this.y < 40){
			this.y = 40;
		}

		if(this.x > innerWidth/2 + this.radius || this.x < innerWidth/2 - this.radius){
			this.radius -= 0.1;
		} else {
			if(this.radius < this.maxRadius-4){
				this.radius += 0.05;
			} else if(this.radius > this.maxRadius-4){
				this.radius = this.maxRadius-4;
			}
		}
		this.draw();
	}
}

function Obstacle(x,y, radius){
	this.x = x;
	this.y = y;
	this.dx = 10;
	this.radius = radius;
	this.target = undefined;

	this.draw = function(){
		ctx.fillStyle = baseFill;
		ctx.beginPath();
		ctx.arc(this.x, this.y,this.radius,0,2*Math.PI);
		ctx.fill();
		ctx.closePath();
	}

	this.update = function(){
		if(this.target != undefined){
			if(this.y > this.target.y){
				this.dx-= 0.2;
			} else if(this.y < this.target.y){
				this.dx+= 0.2;
			}
			this.y += this.dx/20;
		}
		this.draw();
	}
}

var player = new Player(innerWidth/2,innerHeight/2,30);
var drag = false;
var obs = new Obstacle(innerWidth/2, 90, 15);
function animate(){
	window.requestAnimationFrame(animate);
	ctx.clearRect(0,0, innerWidth, innerHeight);
	ctx.strokeStyle='#000';
	ctx.lineWidth = 5;
	ctx.lineCap = 'round';
	ctx.beginPath();
	ctx.moveTo(innerWidth/2,40);
	ctx.lineTo(innerWidth/2,innerHeight-40);
	ctx.stroke();
	if(!drag){
		mouse.y = 0;
		if(mouse.x > innerWidth/2+2){
			mouse.x -= 5;
		} else if(mouse.x < innerWidth/2-2){
			mouse.x += 5;
		}
	}

	player.update();
	obs.target = player;
	obs.update();
}

window.addEventListener('mousedown', function(e){
	mouse.smpx = e.pageX;
	mouse.smpy = e.pageY;
	drag = true;
});

window.addEventListener('mousemove', function(e){
	if(drag){
		mouse.x = (innerWidth/2) + (e.pageX - mouse.smpx);
		mouse.y = (e.pageY-mouse.smpy)/moveDampner;
	}
});

window.addEventListener('mouseleave',function(){
	drag = false;
});

window.addEventListener('mouseup',function(){
	drag = false;
});

window.addEventListener('touchstart', function(e){
	e.preventDefault();
	mouse.smpx = e.touches[0].pageX;
	mouse.smpy = e.touches[0].pageY;
	drag = true;
});

window.addEventListener('touchend', function (e){
	drag = false;
});

window.addEventListener('touchcancel', function(e){
	drag = false;
});

window.addEventListener('touchmove', function(e){
	if(drag){
		mouse.x = (innerWidth/2) + (e.touches[0].pageX-mouse.smpx);
		mouse.y = (e.touches[0].pageY-mouse.smpy)/mouseDampner;
	}
});

animate();
</script></body></html>